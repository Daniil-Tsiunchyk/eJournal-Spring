<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" th:href="@{/css/styles.css}"/>
  <link rel="stylesheet" th:href="@{/css/yaklass.css}"/>
  <title>Прогулы</title>
</head>
<body>
<div th:insert="blocks/sidebar :: sidebar"></div>
<div class="main">
  <div class="container mt-5">
    <h1 class="text-center mb-4">Студенты</h1>
    <div class="mb-3">
      <label for="group" class="form-label">Выберите группу</label>
      <select class="form-select" id="group" name="group" onchange="location = this.value;">
        <option selected disabled>Выберите группу</option>
        <th:block th:each="group : ${groups}">
          <option th:value="'/tablestudents/' + ${group.groupNumber}" th:text="${group.groupNumber}"></option>
        </th:block>
      </select>
    </div>
    <table class="table table-striped">
      <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Email</th>
        <th scope="col">Логин</th>
        <th scope="col">Группа</th>
        <th scope="col">Действия</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="student : ${students}">
        <th scope="row" th:text="${student.id}"></th>
        <td th:text="${student.email}"></td>
        <td th:text="${student.login}"></td>
        <td th:text="${student.groupNumber}"></td>
        <td>
          <a class="btn btn-primary btn-sm" th:href="@{/editUser/{id}(id=${student.id})}" role="button">Редактировать</a>
          <form method="post" th:action="@{/deleteUser}" class="d-inline">
            <input type="hidden" name="userId" th:value="${student.id}">
            <button type="submit" class="btn btn-danger btn-sm">Удалить</button>
          </form>
        </td>
      </tr>
      </tbody>
    </table>
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
      <h1 class="h2">График опозданий группы 114301</h1>
    </div>
    <canvas class="my-4 w-100" id="myChart" width="900" height="380"></canvas>
  </div>

</div>

<canvas id="myChart"></canvas>
<script>
  var ctx = document.getElementById('myChart').getContext('2d');

  var myChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['2023-04-14T12:00', '2023-04-14T14:30', '2023-04-15T10:00', '2023-04-15T16:00', '2023-04-16T09:00', '2023-04-17T11:30', '2023-04-17T18:00', '2023-04-18T14:00', '2023-04-19T10:00', '2023-04-20T12:30'],
      datasets: [{
        label: 'Часы прогула',
        data: [2, 4, 0, 0, 0, 8, 4, 10, 4, 4],
        backgroundColor: 'rgba(75, 192, 192, 0.2)',
        borderColor: 'rgba(75, 192, 192, 1)',
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>
</body>
</html>